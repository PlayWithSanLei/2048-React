:root {
  /* 基础环境色 */
  --bg-page: #FFF9F9;
  --bg-board: #E6D8D8;
  --bg-slot: #F4EAEA;
  --text-primary: #776E65;
  --text-light: #FFFFFF;

  /* 基础尺寸 */
  --tile-size: 100px;
  --grid-gap: 15px;
  --board-padding: 15px;
  --border-radius: 6px;
  --tile-border-radius: 6px;

  /* 字体 */
  --font-family-base: "Segoe UI", "Roboto", "Helvetica Neue", sans-serif;

  /* 特效 */
  --tile-shadow: none;
  --tile-border: none;

  /* 背景纹理 */
  --bg-image-page: none;
  --bg-image-board: none;

  /* 动画曲线 */
  --transition-move: transform 100ms ease-in-out;
  --animation-pop: pop 200ms cubic-bezier(0.175, 0.885, 0.32, 1.275);
  --animation-merge: merge 150ms ease-in-out;

  /* 方块颜色 - 2 */
  --tile-2-bg: #FFD1DC;
  --tile-2-color: #776E65;
  /* 4 */
  --tile-4-bg: #FFDFBA;
  --tile-4-color: #776E65;
  /* 8 */
  --tile-8-bg: #FFFFBA;
  --tile-8-color: #776E65;
  /* 16 */
  --tile-16-bg: #BAFFC9;
  --tile-16-color: #776E65;
  /* 32 */
  --tile-32-bg: #BAE1FF;
  --tile-32-color: #776E65;
  /* 64 */
  --tile-64-bg: #A0C4FF;
  --tile-64-color: #FFFFFF;
  /* 128 */
  --tile-128-bg: #BDB2FF;
  --tile-128-color: #FFFFFF;
  /* 256 */
  --tile-256-bg: #FFC6FF;
  --tile-256-color: #FFFFFF;
  /* 512 */
  --tile-512-bg: #FF9AA2;
  --tile-512-color: #FFFFFF;
  /* 1024 */
  --tile-1024-bg: #FFDAC1;
  --tile-1024-color: #FFFFFF;
  /* 2048 */
  --tile-2048-bg: #FFB7B2;
  --tile-2048-color: #FFFFFF;
  /* 超级大数 fallback */
  --tile-super-bg: #3c3a32;
  --tile-super-color: #FFFFFF;
}

/* ============================================
   MINT THEME (可读性修复 + 色阶优化)
   ============================================ */
[data-theme='mint'] {
  --bg-page: #F0FFF4;
  --bg-board: #D1FAE5;
  --bg-slot: #E6FFFA;
  --text-primary: #22543D;
  --tile-2-bg: #6EE7B7; /* 更深的薄荷绿，与棋盘区分 */
  --tile-2-color: #064E3B;
  --tile-4-bg: #5EEAD4;
  --tile-4-color: #064E3B;
  --tile-8-bg: #4FD1C5;
  --tile-8-color: #064E3B;
  --tile-16-bg: #38B2AC;
  --tile-16-color: #FFFFFF;
  --tile-32-bg: #319795;
  --tile-32-color: #FFFFFF;
  --tile-64-bg: #285E61;
  --tile-64-color: #FFFFFF;
  --tile-128-bg: #234E52;
  --tile-128-color: #FFFFFF;
  --tile-256-bg: #1D4044;
  --tile-256-color: #FFFFFF;
  --tile-512-bg: #173034;
  --tile-512-color: #FFFFFF;
  --tile-1024-bg: #0F2D1D;
  --tile-1024-color: #FFFFFF;
  --tile-2048-bg: #051F14;
  --tile-2048-color: #FFFFFF;
}

/* ============================================
   APPLE THEME (可读性修复)
   ============================================ */
[data-theme='apple'] {
  --bg-page: #FFFFFF;
  --bg-board: #F5F5F7;
  --bg-slot: #E8E8ED;
  --text-primary: #1D1D1F;
  --tile-border-radius: 12px;
  --border-radius: 12px;
  --font-family-base: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", sans-serif;
  --tile-2-bg: #E8E8ED;
  --tile-2-color: #1D1D1F;
  --tile-4-bg: #D1D1D6;
  --tile-4-color: #1D1D1F;
  --tile-8-bg: #C7C7CC;
  --tile-8-color: #1D1D1F;
  --tile-16-bg: #AEAEB2;
  --tile-16-color: #1D1D1F; /* 修复: 深灰字 */
  --tile-32-bg: #8E8E93;
  --tile-32-color: #1D1D1F; /* 修复: 深灰字 */
  --tile-64-bg: #636366;
  --tile-64-color: #1D1D1F; /* 修复: 深灰字 */
  --tile-128-bg: #48484A;
  --tile-128-color: #FFFFFF;
  --tile-256-bg: #3A3A3C;
  --tile-256-color: #FFFFFF;
  --tile-512-bg: #2C2C2E;
  --tile-512-color: #FFFFFF;
  --tile-1024-bg: #1C1C1E;
  --tile-1024-color: #FFFFFF;
  --tile-2048-bg: #007AFF;
  --tile-2048-color: #FFFFFF;
}

/* ============================================
   BAMBOO THEME (Chinese Bamboo)
   ============================================ */
[data-theme='bamboo'] {
  --bg-page: #F0F9F0;
  --bg-board: #3C6E47;
  --bg-slot: #2D5237;
  --text-primary: #1A3A21;
  --font-family-base: "KaiTi", "STKaiti", "BiauKai", serif;
  --tile-2-bg: #C8E6C9;
  --tile-2-color: #1A3A21;
  --tile-4-bg: #A5D6A7;
  --tile-4-color: #1A3A21;
  --tile-8-bg: #81C784;
  --tile-8-color: #1A3A21;
  --tile-16-bg: #66BB6A;
  --tile-16-color: #FFFFFF;
  --tile-32-bg: #4CAF50;
  --tile-32-color: #FFFFFF;
  --tile-64-bg: #43A047;
  --tile-64-color: #FFFFFF;
  --tile-128-bg: #388E3C;
  --tile-128-color: #FFFFFF;
  --tile-256-bg: #2E7D32;
  --tile-256-color: #FFFFFF;
  --tile-512-bg: #1B5E20;
  --tile-512-color: #FFFFFF;
  --tile-1024-bg: #8B7355;
  --tile-1024-color: #FFFFFF;
  --tile-2048-bg: #5D4037;
  --tile-2048-color: #FFFFFF;
}

/* ============================================
   FESTIVE THEME (可读性修复)
   ============================================ */
[data-theme='festive'] {
  --bg-page: #FFF5E6;
  --bg-board: #C41E3A;
  --bg-slot: #8B0000;
  --text-primary: #5D0A0A;
  --font-family-base: "SimSun", "Songti SC", serif;
  --tile-2-bg: #FFD700;
  --tile-2-color: #8B0000;
  --tile-4-bg: #FFA500;
  --tile-4-color: #8B0000;
  --tile-8-bg: #FF8C00;
  --tile-8-color: #5D0A0A; /* 修复: 深红字 */
  --tile-16-bg: #FF6347;
  --tile-16-color: #5D0A0A; /* 修复: 深红字 */
  --tile-32-bg: #FF4500;
  --tile-32-color: #5D0A0A; /* 修复: 深红字 */
  --tile-64-bg: #DC143C;
  --tile-64-color: #FFFFFF;
  --tile-128-bg: #B22222;
  --tile-128-color: #FFFFFF;
  --tile-256-bg: #8B0000;
  --tile-256-color: #FFD700;
  --tile-512-bg: #C41E3A;
  --tile-512-color: #FFD700;
  --tile-1024-bg: #FFD700;
  --tile-1024-color: #8B0000;
  --tile-2048-bg: #DAA520;
  --tile-2048-color: #8B0000;
}

/* ============================================
   INK THEME (宣纸质感优化)
   ============================================ */
[data-theme='ink'] {
  --bg-page: #F5F5DC; /* 宣纸米黄色 */
  --bg-board: #2C2C2C;
  --bg-slot: #1A1A1A;
  --text-primary: #0A0A0A;
  --font-family-base: "KaiTi", "STKaiti", "BiauKai", serif;
  --tile-border: 2px solid #0A0A0A;
  --tile-2-bg: #FAF9F6; /* 暖白，带宣纸感 */
  --tile-2-color: #0A0A0A;
  --tile-4-bg: #F0EDE8;
  --tile-4-color: #0A0A0A;
  --tile-8-bg: #E8E5DD;
  --tile-8-color: #0A0A0A;
  --tile-16-bg: #D0CCC0;
  --tile-16-color: #0A0A0A;
  --tile-32-bg: #B8B4A8;
  --tile-32-color: #FFFFFF;
  --tile-64-bg: #A09C90;
  --tile-64-color: #FFFFFF;
  --tile-128-bg: #888480;
  --tile-128-color: #FFFFFF;
  --tile-256-bg: #706C60;
  --tile-256-color: #FFFFFF;
  --tile-512-bg: #585450;
  --tile-512-color: #FFFFFF;
  --tile-1024-bg: #403C30;
  --tile-1024-color: #FFFFFF;
  --tile-2048-bg: #0A0A0A;
  --tile-2048-color: #FFFFFF;
}

/* ============================================
   CYBERPUNK THEME (Based on Cyberpunk 2077 UI/HUD)
   ============================================ */
[data-theme='cyberpunk'] {
  /* 环境色 - 纯黑底色 */
  --bg-page: #000000;
  --bg-board: #0A0A0A;
  --bg-slot: #1A1A1A;
  --text-primary: #F3E600; /* Cyber Yellow - 游戏标志性黄色 */

  /* 几何 - 硬朗直角，科技感 */
  --tile-border-radius: 0px;
  --border-radius: 0px;
  --font-family-base: "Courier New", "Rajdhani", "Orbitron", monospace;

  /* 特效 - 霓虹发光 (三层发光增强效果) */
  --tile-shadow:
    0 0 5px currentColor,
    0 0 10px currentColor,
    0 0 20px currentColor,
    0 0 40px var(--tile-bg);
  --tile-border: 1px solid rgba(243, 230, 0, 0.3);

  /* 背景网格 - HUD 扫描线效果 */
  --bg-image-page:
    linear-gradient(rgba(85, 234, 212, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(85, 234, 212, 0.03) 1px, transparent 1px),
    linear-gradient(rgba(197, 0, 60, 0.02) 2px, transparent 2px),
    linear-gradient(90deg, rgba(197, 0, 60, 0.02) 2px, transparent 2px);

  /* 方块颜色阶梯 - 基于 Cyberpunk 2077 UI 配色 */
  /* Cyan 阶梯 - 低级植入体 */
  --tile-2-bg: #55EAD4;
  --tile-2-color: #000000;
  --tile-4-bg: #00F0FF;
  --tile-4-color: #000000;
  --tile-8-bg: #05D9E8;
  --tile-8-color: #000000;
  --tile-16-bg: #D1F7FF;
  --tile-16-color: #000000;
  /* Yellow 突变 - 高亮 */
  --tile-32-bg: #F3E600;
  --tile-32-color: #000000;
  /* Red/Crimson - 战斗/危险 */
  --tile-64-bg: #C5003C;
  --tile-64-color: #FFFFFF;
  --tile-128-bg: #FF003C;
  --tile-128-color: #FFFFFF;
  --tile-256-bg: #880425;
  --tile-256-color: #FFFFFF;
  /* Purple - 高级义体 */
  --tile-512-bg: #7127FF;
  --tile-512-color: #FFFFFF;
  /* Chrome/Legendary */
  --tile-1024-bg: #E0E0E0;
  --tile-1024-color: #000000;
  --tile-2048-bg: #FCEE0A;
  --tile-2048-color: #000000;
}

/* ============================================
   STEAMPUNK THEME
   ============================================ */
[data-theme='steampunk'] {
  --bg-page: #2C241B;
  --bg-board: #4A3728;
  --bg-slot: #3D2D22;
  --text-primary: #D4A574;
  --tile-border: 2px solid #8B6914;
  --tile-border-radius: 2px;
  --tile-2-bg: #CD7F32;
  --tile-2-color: #2C241B;
  --tile-4-bg: #B8860B;
  --tile-4-color: #2C241B;
  --tile-8-bg: #DAA520;
  --tile-8-color: #2C241B;
  --tile-16-bg: #B5A642;
  --tile-16-color: #2C241B;
  --tile-32-bg: #8B7355;
  --tile-32-color: #FFFFFF;
  --tile-64-bg: #A0522D;
  --tile-64-color: #FFFFFF;
  --tile-128-bg: #8B4513;
  --tile-128-color: #FFFFFF;
  --tile-256-bg: #654321;
  --tile-256-color: #DAA520;
  --tile-512-bg: #4A3728;
  --tile-512-color: #DAA520;
  --tile-1024-bg: #2C241B;
  --tile-1024-color: #CD7F32;
  --tile-2048-bg: #1A120B;
  --tile-2048-color: #FFD700;
}

/* ============================================
   WITCHER THEME
   ============================================ */
[data-theme='witcher'] {
  --bg-page: #1A1A1D;
  --bg-board: #2D2D35;
  --bg-slot: #1F1F25;
  --text-primary: #C5A059;
  --font-family-base: "Cinzel", "Trajan Pro", "Times New Roman", serif;
  --tile-2-bg: #3E3E4A;
  --tile-2-color: #C5A059;
  --tile-4-bg: #4A4A58;
  --tile-4-color: #C5A059;
  --tile-8-bg: #5C5C6E;
  --tile-8-color: #FFFFFF;
  --tile-16-bg: #6E6E82;
  --tile-16-color: #FFFFFF;
  --tile-32-bg: #828296;
  --tile-32-color: #FFFFFF;
  --tile-64-bg: #9696AA;
  --tile-64-color: #FFFFFF;
  --tile-128-bg: #A8A8BC;
  --tile-128-color: #FFFFFF;
  --tile-256-bg: #BABACE;
  --tile-256-color: #1A1A1D;
  --tile-512-bg: #8B0000;
  --tile-512-color: #FFFFFF;
  --tile-1024-bg: #5C0A0A;
  --tile-1024-color: #C5A059;
  --tile-2048-bg: #C5A059;
  --tile-2048-color: #1A1A1D;
}

/* ============================================
   ZELDA THEME
   ============================================ */
[data-theme='zelda'] {
  --bg-page: #1A2820;
  --bg-board: #2D4A35;
  --bg-slot: #1F3A25;
  --text-primary: #FFD700;
  --tile-2-bg: #00BFFF;
  --tile-2-color: #FFFFFF;
  --tile-4-bg: #009ACD;
  --tile-4-color: #FFFFFF;
  --tile-8-bg: #228B22;
  --tile-8-color: #FFFFFF;
  --tile-16-bg: #32CD32;
  --tile-16-color: #FFFFFF;
  --tile-32-bg: #90EE90;
  --tile-32-color: #1A2820;
  --tile-64-bg: #00FF7F;
  --tile-64-color: #1A2820;
  --tile-128-bg: #FFD700;
  --tile-128-color: #1A2820;
  --tile-256-bg: #FFA500;
  --tile-256-color: #FFFFFF;
  --tile-512-bg: #FF8C00;
  --tile-512-color: #FFFFFF;
  --tile-1024-bg: #FF6347;
  --tile-1024-color: #FFFFFF;
  --tile-2048-bg: #FFD700;
  --tile-2048-color: #1A2820;
}

/* ============================================
   MARIO THEME
   ============================================ */
[data-theme='mario'] {
  --bg-page: #5C94FC;
  --bg-board: #804000;
  --bg-slot: #6B3200;
  --text-primary: #FFFFFF;
  --tile-border-radius: 0px;
  --border-radius: 0px;
  --tile-2-bg: #E52521;
  --tile-2-color: #FFFFFF;
  --tile-4-bg: #049CD8;
  --tile-4-color: #FFFFFF;
  --tile-8-bg: #43B047;
  --tile-8-color: #FFFFFF;
  --tile-16-bg: #FFD700;
  --tile-16-color: #000000;
  --tile-32-bg: #FFA500;
  --tile-32-color: #FFFFFF;
  --tile-64-bg: #AA6C39;
  --tile-64-color: #FFFFFF;
  --tile-128-bg: #F8F8F8;
  --tile-128-color: #E52521;
  --tile-256-bg: #FFD700;
  --tile-256-color: #000000;
  --tile-512-bg: #00A800;
  --tile-512-color: #FFFFFF;
  --tile-1024-bg: #E52521;
  --tile-1024-color: #FFFFFF;
  --tile-2048-bg: #049CD8;
  --tile-2048-color: #FFFFFF;
}

/* ============================================
   MICROSOFT THEME (Windows 10/11 Fluent Design 优化)
   ============================================ */
[data-theme='microsoft'] {
  --bg-page: #F3F3F3; /* Mica 材质感 */
  --bg-board: #EDEDED;
  --bg-slot: #FFFFFF;
  --text-primary: #1F1F1F;
  --tile-border-radius: 0px;
  --border-radius: 0px;
  --font-family-base: "Segoe UI", "Helvetica Neue", sans-serif;

  /* Windows Blue 阶梯 - 浅灰到蓝色渐变 */
  --tile-2-bg: #FFFFFF;
  --tile-2-color: #1F1F1F;
  --tile-4-bg: #F5F5F5;
  --tile-4-color: #1F1F1F;
  --tile-8-bg: #E5E5E5;
  --tile-8-color: #1F1F1F;
  --tile-16-bg: #CCCCCC;
  --tile-16-color: #1F1F1F;
  --tile-32-bg: #99EBFF; /* Light Blue */
  --tile-32-color: #1F1F1F;
  --tile-64-bg: #66D9FF; /* Sky Blue */
  --tile-64-color: #1F1F1F;
  --tile-128-bg: #33C7FF; /* Vivid Blue */
  --tile-128-color: #1F1F1F;
  --tile-256-bg: #0078D7; /* Windows 10 Blue - Standard */
  --tile-256-color: #FFFFFF;
  --tile-512-bg: #0063B1; /* Darker Blue */
  --tile-512-color: #FFFFFF;
  --tile-1024-bg: #005A9E; /* Deep Blue */
  --tile-1024-color: #FFFFFF;
  --tile-2048-bg: #0078D4; /* Brand Blue - 带强调 */
  --tile-2048-color: #FFFFFF;
}

@keyframes pop {
  0% { transform: scale(0); opacity: 0; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes merge {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

/* ============================================
   CYBERPUNK THEME SPECIFIC OVERRIDES
   ============================================ */
[data-theme='cyberpunk'] body {
  background-size: 20px 20px, 20px 20px, 100px 100px, 100px 100px;
}

/* Cyberpunk 霓虹文字发光效果 */
[data-theme='cyberpunk'] .title {
  text-shadow:
    0 0 5px #F3E600,
    0 0 10px #F3E600,
    0 0 20px #F3E600;
}

/* ============================================
   MOBILE RESPONSIVE ADAPTATION
   ============================================ */
@media screen and (max-width: 520px) {
  :root {
    /* 使用 vmin 单位实现流式缩放，确保横竖屏都适配 */
    --tile-size: 18.5vmin;
    --grid-gap: 2.5vmin;
    --board-padding: 2.5vmin;
    --border-radius: 4px;
    --tile-border-radius: 4px;
  }

  /* Apple 主题保持圆角但稍微缩小 */
  [data-theme='apple'] {
    --tile-border-radius: 8px;
    --border-radius: 8px;
  }

  /* Cyberpunk 主题保持直角 */
  [data-theme='cyberpunk'],
  [data-theme='mario'],
  [data-theme='microsoft'] {
    --tile-border-radius: 0px;
    --border-radius: 0px;
  }

  /* Steampunk 小圆角 */
  [data-theme='steampunk'] {
    --tile-border-radius: 2px;
    --border-radius: 2px;
  }
}
